version: "3.4"

services:
  xinfinnetwork1:
    build:
        context: .
        dockerfile: /root/XinFin/XinFin-Node/dockerfiles/xdc-testnet-node/Dockerfile
    volumes:
      - "./xdcchain-testnet-1:/work/xdcchain-testnet"
      - "./testnetgenesis.json:/work/testnetgenesis.json"
      - "./start-apothem.sh:/work/start-apothem.sh"
      - "./testnetbootnodes.list:/work/testnetbootnodes.list"
      - "./.pwd:/work/.pwd"
      - "/etc/localtime:/etc/localtime:ro"
    restart: "always"
    env_file: "./envs/.env.${HOSTIP}-1"
    ports:
      - "30303:30303"
      - "8545:8545"
      - "8555:8555"

  xinfinnetwork2:
    build:
        context: .
        dockerfile: /root/XinFin/XinFin-Node/dockerfiles/xdc-testnet-node/Dockerfile
    volumes:
      - "./xdcchain-testnet-2:/work/xdcchain-testnet"
      - "./testnetgenesis.json:/work/testnetgenesis.json"
      - "./start-apothem.sh:/work/start-apothem.sh"
      - "./testnetbootnodes.list:/work/testnetbootnodes.list"
      - "./.pwd:/work/.pwd"
      - "/etc/localtime:/etc/localtime:ro"
    restart: "always"
    env_file: "./envs/.env.${HOSTIP}-2"
    ports:
      - "30304:30304"
      - "8546:8546"
      - "8556:8556"